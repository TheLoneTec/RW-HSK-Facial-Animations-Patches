<?xml version="1.0" encoding="utf-8" ?>
<Patch>
    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/comps</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]</xpath>
                <value>
                    <comps/>
                </value>
            </li>
        </operations>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/comps</xpath>
        <value>
            <li>
                <compClass>FacialAnimation.DrawFaceGraphicsComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.HeadControllerComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.EyeballControllerComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.LidControllerComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.BrowControllerComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.MouthControllerComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.SkinControllerComp</compClass>
            </li>
            <li>
                <compClass>FacialAnimation.FacialAnimationControllerComp</compClass>
            </li>
        </value>
    </Operation>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Nals Facial Animation for HAR</li>
        </mods>
        <match Class="PatchOperationReplace">
            <xpath>/Defs/FacialAnimation.FaceAdjustmentDef[defName="OrassanFaceSizeAndPositionDef"]/Size</xpath>
            <value>
                <Size>(1.4,1.4)</Size>
            </value>
        </match>
    </Operation>
    <!-- ============================ Ears and Tails ============================ -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/alienRace/generalSettings/alienPartGenerator/bodyAddons</xpath>
        <value>
            <bodyAddons>
                <li>
                    <drawSize>.87</drawSize>
                    <path>Things/Pawn/Humanlike/Tails/OTail</path>
                    <bodyPart>Tail</bodyPart>
                    <backstoryGraphics>
                        <Orassan_GeneWarrior>Things/Pawn/Humanlike/Tails/OTailG</Orassan_GeneWarrior>
                    </backstoryGraphics>
                    <inFrontOfBody>true</inFrontOfBody>
                    <colorChannel>hair</colorChannel>
                    <drawnInBed>false</drawnInBed>
                    <drawnDesiccated>false</drawnDesiccated>
                    <defaultOffset>Tail</defaultOffset>
                    <offsets>
                        <south>
                            <bodyTypes>
                                <Male>(-0.25,-0.2)</Male>
                                <Female>(-.1,-0.2)</Female>
                                <Thin>(-.1,-0.2)</Thin>
                                <Hulk>(-.1,-0.2)</Hulk>
                            </bodyTypes>
                        </south>
                        <north>
                            <layerOffset>-1</layerOffset>
                            <bodyTypes>
                                <Male>(-0.0282,-0.0895)</Male>
                                <Female>(-0.0225,-0.1177)</Female>
                                <Thin>(-0.0395,-0.0612)</Thin>
                                <Hulk>(-0.0338,-0.1742)</Hulk>
                            </bodyTypes>
                        </north>
                        <east>
                            <bodyTypes>
                                <Male>(0.186,-0.385)</Male>
                                <Female>(0.276,-0.36)</Female>
                                <Thin>(0.201,-0.366)</Thin>
                                <Hulk>(0.366,-0.515)</Hulk>
                            </bodyTypes>
                        </east>
                    </offsets>
                </li>
                <li>
                    <drawSize>0.87</drawSize>
                    <path>Orassan_Ears/EarLeft</path>
                    <bodyPart>left ear</bodyPart>
                    <inFrontOfBody>true</inFrontOfBody>
                    <drawnDesiccated>false</drawnDesiccated>
                    <colorChannel>hair</colorChannel>
                    <defaultOffset>Tail</defaultOffset>
                    <offsets>
                        <south>
                            <bodyTypes>
                                <Male>(-0.475,.67)</Male>
                                <Female>(-0.475,.67)</Female>
                                <Thin>(-0.475,.67)</Thin>
                                <Hulk>(-0.475,.67)</Hulk>
                            </bodyTypes>
                            <portraitBodyTypes>
                                <Male>(-0.45,.67)</Male>
                                <Female>(-0.45,.67)</Female>
                                <Thin>(-0.45,.67)</Thin>
                                <Hulk>(-0.45,.67)</Hulk>
                            </portraitBodyTypes>
                        </south>
                        <north>
                            <bodyTypes>
                                <Male>(0.05,.98)</Male>
                                <Female>(0.05,.98)</Female>
                                <Thin>(0.05,.98)</Thin>
                                <Hulk>(0.05,.98)</Hulk>
                            </bodyTypes>
                            <portraitBodyTypes>
                                <Male>(-0.04,.89)</Male>
                                <Female>(-0.04,.89)</Female>
                                <Thin>(-0.04,.89)</Thin>
                                <Hulk>(-0.04,.89)</Hulk>
                            </portraitBodyTypes>
                            <crownTypes>
                                <Average_Normal>(0,0.057)</Average_Normal>
                                <Average_Wide>(0,0.057)</Average_Wide>
                                <Average_Pointy>(0,0.057)</Average_Pointy>
                                <Narrow_Normal>(0,0.057)</Narrow_Normal>
                                <Narrow_Wide>((0,0.057)</Narrow_Wide>
                                <Narrow_Pointy>(0,0.057)</Narrow_Pointy>
                            </crownTypes>
                        </north>
                        <east>
                            <bodyTypes>
                                <Male>(-0.529,.75)</Male>
                                <Female>(-0.593,.75)</Female>
                                <Thin>(-0.593,.75)</Thin>
                                <Hulk>(-0.593,.75)</Hulk>
                            </bodyTypes>
                        </east>
                    </offsets>
                </li>
                <li>
                    <drawSize>0.87</drawSize>
                    <path>Orassan_Ears/EarRight</path>
                    <bodyPart>right ear</bodyPart>
                    <inFrontOfBody>true</inFrontOfBody>
                    <drawnDesiccated>false</drawnDesiccated>
                    <colorChannel>hair</colorChannel>
                    <defaultOffset>Tail</defaultOffset>
                    <offsets>
                        <south>
                            <bodyTypes>
                                <Male>(-0.375,.67)</Male>
                                <Female>(-0.375,.67)</Female>
                                <Thin>(-0.375,.67)</Thin>
                                <Hulk>(-0.375,.67)</Hulk>
                            </bodyTypes>
                            <portraitBodyTypes>
                                <Male>(-0.4,.67)</Male>
                                <Female>(-0.4,.67)</Female>
                                <Thin>(-0.4,.67)</Thin>
                                <Hulk>(-0.4,.67)</Hulk>
                            </portraitBodyTypes>
                        </south>
                        <north>
                            <bodyTypes>
                                <Male>(-0.038,.98)</Male>
                                <Female>(-0.038,.98)</Female>
                                <Thin>(-0.038,.98)</Thin>
                                <Hulk>(-0.038,.98)</Hulk>
                            </bodyTypes>
                            <portraitBodyTypes>
                                <Male>(-0.01,1)</Male>
                                <Female>(-0.01,1)</Female>
                                <Thin>(-0.01,1)</Thin>
                                <Hulk>(-0.01,1)</Hulk>
                            </portraitBodyTypes>
                            <crownTypes>
                                <Average_Normal>(-0.038,0.058)</Average_Normal>
                                <Average_Wide>(-0.038,0.058)</Average_Wide>
                                <Average_Pointy>(-0.038,0.058)</Average_Pointy>
                                <Narrow_Normal>(-0.038,0.058)</Narrow_Normal>
                                <Narrow_Wide>((-0.038,0.058)</Narrow_Wide>
                                <Narrow_Pointy>(-0.038,0.058)</Narrow_Pointy>
                            </crownTypes>
                        </north>
                        <east>
                            <layerOffset>-0.5</layerOffset>
                            <bodyTypes>
                                <Male>(-0.573,.75)</Male>
                                <Female>(-0.631,.75)</Female>
                                <Thin>(-0.631,.75)</Thin>
                                <Hulk>(-0.631,.75)</Hulk>
                            </bodyTypes>
                        </east>
                    </offsets>
                </li>
            </bodyAddons>
        </value>
    </Operation>
    <!-- ============================ Skin colors  ============================ -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/alienRace/generalSettings/alienPartGenerator/colorChannels</xpath>
        <value>
            <colorChannels>
                <li>
                    <name>skin</name>
                    <first Class="ColorGenerator_Options">
                        <options>
                            <li>
                                <weight>5</weight>
                                <only>RGBA(0.81,0.74,0.57,1)</only>
                            </li>
                            <li>
                                <weight>5</weight>
                                <only>RGBA(0.72,0.72,0.72,1)</only>
                            </li>
                            <li>
                                <weight>5</weight>
                                <only>RGBA(0.52,0.32,0.25,1)</only>
                            </li>
                            <li>
                                <weight>5</weight>
                                <only>RGBA(0.29,0.24,0.13,1)</only>
                            </li>
                            <li>
                                <weight>5</weight>
                                <only>RGBA(0.73,0.63,0.40,1)</only>
                            </li>
                            <li>
                                <weight>5</weight>
                                <only>RGBA(0.74,0.53,0.37,1)</only>
                            </li>
                        </options>
                    </first>
                </li>
            </colorChannels>
        </value>
    </Operation>
    <!-- ============================ Body size  ============================ -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/alienRace/generalSettings/alienPartGenerator/customDrawSize</xpath>
        <value>
            <customDrawSize>(0.87, 0.87)</customDrawSize>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/alienRace/generalSettings/alienPartGenerator/customPortraitDrawSize</xpath>
        <value>
            <customPortraitDrawSize>(.87, .87)</customPortraitDrawSize>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="Alien_Orassan"]/race/baseBodySize</xpath>
        <value>
            <baseBodySize>.87</baseBodySize>
        </value>
    </Operation>
</Patch>